<div class="container py-4">
  <h2 class="fw-bold mb-4"><%= @listing.title %></h2>
  <div class="row g-3">
    <!-- Main image carousel -->
    <div class="col-12">
      <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <% @listing.photos.each_with_index do |photo, index| %>
            <% if index == 0 %>
              <div class="carousel-item active">
                <%= cl_image_tag photo.key, class: "d-block w-100 h-50"%>
              </div>
            <% else %>
              <div class="carousel-item">
                <%= cl_image_tag photo.key, class: "d-block w-100" %>
              </div>
            <% end %>
          <% end %>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
        </div>
    </div>

  <div class="row mt-4">
    <div class="col-sm-8 col-md-10">
      <p><%= @listing.description %></p>
    </div>
    <div class="col-sm-4 col-md-2">
      <ul class="list-unstyled">
        <li><strong>Location:</strong> <%= @listing.user.address %></li>
        <li><strong>Posted by:</strong> <%= @listing.user.first_name %></li>
        <li><strong>Category:</strong> <%= @listing.category %></li>
        <li><strong>Price: </strong><%= number_to_currency(@listing.price, unit: "â‚¬", format: "%n%u") %></li>
      </ul>
      <%= link_to "Back to listings", listings_path, class: "btn btn-secondary rounded-pill" %>
      <% if @listing.user == current_user %>
        <div class="mt-2">
          <%= link_to "Edit", edit_listing_path(@listing), class: "btn btn-secondary me-2" %>
          <%= link_to "Delete", listing_path(@listing), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this booking?"}, class: "btn btn-danger" %>
        </div>
      <% end %>
    </div>
  </div>

  <hr class="my-4">

  <h3>Make a booking</h3>
  <%= render "shared/booking_form", class: "mb-5" %>
  <br>
